"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ExpressStandardConfiguration = void 0;
const express_1 = __importDefault(require("express"));
const cors_1 = __importDefault(require("cors"));
const APIService_1 = require("../APIService");
class ExpressStandardConfiguration {
    apply(app) {
        app.use(ExpressStandardConfiguration.getCorsConfiguration());
        app.use(express_1.default.json({ limit: '50mb' }));
        app.use(express_1.default.urlencoded({ limit: '50mb', extended: true }));
        //app.use(urlencoded({ extended: true }));
    }
    static getCorsConfiguration() {
        return (0, cors_1.default)({
            origin: function (origin, callback) {
                let whitelist = APIService_1.ITRMAPIServiceGlobal.whitelist;
                if (whitelist.length == 0 || (origin && whitelist.indexOf(origin) !== -1))
                    callback(null, true);
                else
                    callback(new Error('Not allowed by CORS'), false);
            }
        });
    }
}
exports.ExpressStandardConfiguration = ExpressStandardConfiguration;
//# sourceMappingURL=ExpressStandardConfiguration.js.map